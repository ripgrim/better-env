{"version":3,"sources":["../src/index.ts","../src/utils/auth.ts","../src/lib/trpc-client.ts","../src/utils/common.ts","../src/ui/ui.ts","../src/screens/auth.ts","../src/screens/main-menu.ts","../src/screens/projects.ts","../src/screens/settings.ts"],"sourcesContent":["\nimport fs from \"fs\";\nimport {\n  CliRenderer,\n  createCliRenderer,\n  GroupRenderable,\n  TextRenderable,\n  type ParsedKey,\n} from \"@opentui/core\";\nimport { getKeyHandler } from \"@opentui/core\";\n\n// Debug logger that writes to file \nconst debugLog = (message: string) => {\n  fs.appendFileSync(\n    \"/tmp/cli-debug.log\",\n    `${new Date().toISOString()} ${message}\\n`\n  );\n};\n\n// Utils\nimport {\n  isAuthenticated,\n  getCurrentUser,\n  tryClipboardAuth,\n  openBrowser,\n  loadToken,\n} from \"./utils/auth\";\nimport {\n  handleDebouncedSelection,\n  createScreenManager,\n  runPull,\n  runPush,\n} from \"./utils/common\";\nimport { colors } from \"./ui/ui\";\n\n// Screens\nimport { createAuthScreens } from \"./screens/auth\";\nimport { createMainMenuScreen } from \"./screens/main-menu\";\nimport { createProjectScreens } from \"./screens/projects\";\nimport { createSettingsScreens } from \"./screens/settings\";\n\nlet renderer: CliRenderer | null = null;\nlet parentContainer: GroupRenderable | null = null;\nlet currentUser: {\n  id: string;\n  name: string;\n  email: string;\n  image?: string | null;\n} | null = null;\nlet cliToken: string | null = null;\n\n// Screen manager\nconst screenManager = createScreenManager();\nconst {\n  setCurrentScreen,\n  getCurrentScreen,\n  clearScreen,\n  addElement,\n  setFocusedElement,\n  cleanup,\n  setParentContainer,\n} = screenManager;\n\n// Screen instances\nlet authScreens: any = null;\nlet mainMenuScreen: any = null;\nlet projectScreens: any = null;\nlet settingsScreens: any = null;\n\nasync function handleMenuSelection(value: string) {\n  switch (value) {\n    case \"projects\":\n      await projectScreens.showProjects();\n      break;\n    case \"create\":\n      projectScreens.showCreateProject();\n      break;\n    case \"pull\":\n      await projectScreens.showPullEnv();\n      break;\n    case \"push\":\n      await projectScreens.showPushEnv();\n      break;\n    case \"profile\":\n      await settingsScreens.showUserProfile();\n      break;\n    case \"settings\":\n      await settingsScreens.showSettings();\n      break;\n    case \"quit\":\n      process.exit(0);\n      break;\n  }\n}\n\nasync function checkAuthAndContinue() {\n  if (await isAuthenticated()) {\n    currentUser = await getCurrentUser();\n    mainMenuScreen.showSplashScreen();\n  } else {\n    authScreens.showAuthError();\n  }\n}\n\nasync function handleClipboardAuth() {\n  const result = await tryClipboardAuth();\n  if (result.success && result.token) {\n    cliToken = result.token;\n    if (await isAuthenticated()) {\n      currentUser = await getCurrentUser();\n      mainMenuScreen.showSplashScreen();\n    } else {\n      authScreens.showAuthError();\n    }\n  } else {\n    authScreens.showTokenInput();\n  }\n}\n\nfunction handleKeyPress(key: ParsedKey) {\n  debugLog(\n    `üéπ Key event: ${JSON.stringify({ name: key.name, sequence: key.sequence, ctrl: key.ctrl, meta: key.meta, shift: key.shift })}`\n  );\n\n  // Filter out mouse/touchpad events and unwanted keys\n  if (!key.name || key.name.includes(\"mouse\") || key.sequence === \"\\u001b[M\") {\n    debugLog(\"üö´ Ignoring mouse/touchpad event\");\n    return;\n  }\n\n  if (key.ctrl && key.name === \"c\") {\n    process.exit(0);\n  }\n\n  if (key.name === \"escape\" || key.name === \"backspace\") {\n    switch (getCurrentScreen()) {\n      case \"main\":\n        mainMenuScreen.showSplashScreen();\n        break;\n      case \"projects\":\n      case \"profile\":\n      case \"settings\":\n        mainMenuScreen.showMainMenu();\n        break;\n      case \"login\":\n        process.exit(0);\n        break;\n      case \"token-input\":\n        authScreens.cleanupTokenInput();\n        authScreens.showLoginScreen();\n        break;\n      case \"project-details\":\n        projectScreens.showProjects();\n        break;\n      case \"project-envvars\":\n        const projectId = getCurrentScreen().split(\"-\")[2] || \"1\";\n        projectScreens.showProjectDetails(projectId);\n        break;\n      case \"create-project\":\n      case \"pull-env\":\n      case \"push-env\":\n      case \"env-var-details\":\n        mainMenuScreen.showMainMenu();\n        break;\n      case \"pull-confirm\":\n        projectScreens.showPullEnv();\n        break;\n      case \"push-var-selection\":\n        projectScreens.showPushEnv();\n        break;\n      case \"push-confirm\":\n        const currentProjectId = getCurrentScreen().split(\"-\")[2] || \"1\";\n        projectScreens.showPushVarSelection(currentProjectId);\n        break;\n    }\n    return;\n  }\n\n  if (getCurrentScreen() === \"splash\") {\n    mainMenuScreen.showMainMenu();\n    return;\n  }\n\n  if (getCurrentScreen() === \"login\") {\n    if (key.name === \"q\") {\n      debugLog(\"üö™ User chose to quit\");\n      process.exit(0);\n    } else if (key.name === \"o\") {\n      debugLog(\"üåê User chose to open browser\");\n      openBrowser();\n    } else if (key.name === \"t\") {\n      debugLog(\"üìù User chose to enter token\");\n      authScreens.showTokenInput();\n    } else if (key.name === \"c\") {\n      debugLog(\"üìã User chose clipboard auth\");\n      handleClipboardAuth();\n    } else if (\n      key.name === \"space\" ||\n      key.name === \"return\" ||\n      key.name === \"enter\"\n    ) {\n      debugLog(\"‚è≠Ô∏è User pressed space/enter to continue\");\n      checkAuthAndContinue();\n    } else {\n      debugLog(`üö´ Ignoring key '${key.name}' on login screen`);\n    }\n    return;\n  }\n\n  if (getCurrentScreen() === \"auth-error\") {\n    authScreens.showLoginScreen();\n    return;\n  }\n}\n\nfunction initializeScreens() {\n  if (!renderer || !parentContainer) return;\n\n  // Initialize main menu screen first\n  mainMenuScreen = createMainMenuScreen(\n    renderer,\n    parentContainer,\n    addElement,\n    clearScreen,\n    setCurrentScreen,\n    handleDebouncedSelection,\n    handleMenuSelection\n  );\n\n  // Initialize auth screens (now mainMenuScreen exists)\n  authScreens = createAuthScreens(\n    renderer,\n    parentContainer,\n    addElement,\n    clearScreen,\n    setCurrentScreen,\n    () => mainMenuScreen.showSplashScreen(),\n    (token: string) => {\n      cliToken = token;\n    }\n  );\n\n  // Initialize project screens\n  projectScreens = createProjectScreens(\n    renderer,\n    parentContainer,\n    addElement,\n    clearScreen,\n    setCurrentScreen,\n    handleDebouncedSelection,\n    () => mainMenuScreen.showMainMenu(),\n    runPull,\n    runPush\n  );\n\n  // Initialize settings screens\n  settingsScreens = createSettingsScreens(\n    renderer,\n    parentContainer,\n    addElement,\n    clearScreen,\n    setCurrentScreen,\n    handleDebouncedSelection,\n    () => mainMenuScreen.showMainMenu(),\n    () => authScreens.showLoginScreen(),\n    getCurrentUser // Pass the actual function that fetches fresh data from API\n  );\n}\n\nfunction cleanupApp() {\n  if (authScreens?.cleanupTokenInput) {\n    authScreens.cleanupTokenInput();\n  }\n\n  cleanup();\n\n  if (renderer) {\n    renderer.destroy();\n  }\n}\n\nexport async function run(): Promise<void> {\n  // Clear previous log\n  fs.writeFileSync(\"/tmp/cli-debug.log\", \"\");\n  debugLog(\"üöÄ Starting CLI...\");\n\n  renderer = await createCliRenderer({\n    targetFps: 30,\n    exitOnCtrlC: false,\n  });\n\n  debugLog(\"‚úÖ Renderer created\");\n  // Remove delay for now\n  // await new Promise(resolve => setTimeout(resolve, 2000))\n\n  renderer.start();\n  renderer.setBackgroundColor(colors.background);\n\n  parentContainer = new GroupRenderable(\"main-container\", {\n    positionType: \"absolute\",\n    position: {\n      left: 0,\n      top: 0,\n    },\n    zIndex: 15,\n    visible: true,\n  });\n  renderer.root.add(parentContainer);\n  debugLog(\"‚úÖ Parent container created and added\");\n\n  // Connect screen manager to parent container\n  setParentContainer(parentContainer);\n\n  // Initialize all screen components\n  initializeScreens();\n  debugLog(\"‚úÖ Screen components initialized\");\n\n  // Set up key handling\n  getKeyHandler().on(\"keypress\", handleKeyPress);\n\n  process.on(\"SIGINT\", () => {\n    cleanupApp();\n    process.exit(0);\n  });\n\n  // Check authentication and show appropriate screen\n  debugLog(\"üîç Checking authentication...\");\n  cliToken = loadToken();\n  debugLog(`üîë Token loaded: ${cliToken ? \"YES\" : \"NO\"}`);\n\n  if (cliToken && (await isAuthenticated())) {\n    debugLog(\"‚úÖ User authenticated, getting user data...\");\n    currentUser = await getCurrentUser();\n    debugLog(`üë§ Current user: ${currentUser?.name || \"Unknown\"}`);\n    debugLog(\"üéØ Showing splash screen...\");\n    mainMenuScreen.showSplashScreen();\n  } else {\n    debugLog(\"‚ùå User not authenticated, showing login screen...\");\n    authScreens.showLoginScreen();\n  }\n\n  debugLog(\"üéØ CLI initialization complete\");\n}\n\nrun();\n","import { existsSync, mkdirSync, readFileSync, writeFileSync, appendFileSync } from \"fs\";\nimport { join } from \"path\";\nimport { homedir } from \"os\";\nimport { apiClient } from \"../lib/trpc-client\";\n\n// Debug logger that writes to file\nconst debugLog = (message: string) => {\n  appendFileSync('/tmp/cli-debug.log', `${new Date().toISOString()} ${message}\\n`);\n};\n\n/**\n * Load CLI token from disk\n */\nexport function loadToken(): string | null {\n  try {\n    const tokenPath = join(homedir(), \".better-env\", \"token\");\n    if (existsSync(tokenPath)) {\n      return readFileSync(tokenPath, \"utf8\").trim();\n    }\n  } catch (error) {\n    debugLog(`‚ùå Error loading token: ${error}`);\n  }\n  return null;\n}\n\n/**\n * Save CLI token to disk\n */\nexport function saveToken(token: string): void {\n  debugLog(`üíæ Saving token: length=${token.length}, prefix=${token.substring(0, 8)}...`);\n  try {\n    const configDir = join(homedir(), \".better-env\");\n    if (!existsSync(configDir)) {\n      debugLog(\"üìÅ Creating config directory...\");\n      mkdirSync(configDir, { recursive: true });\n    }\n    const tokenPath = join(configDir, \"token\");\n    writeFileSync(tokenPath, token);\n    debugLog(`‚úÖ Token saved to ${tokenPath}`);\n  } catch (error) {\n    debugLog(`‚ùå Error saving token: ${error}`);\n  }\n}\n\n/**\n * Clear CLI token from disk\n */\nexport function clearToken(): void {\n  try {\n    const tokenPath = join(homedir(), \".better-env\", \"token\");\n    if (existsSync(tokenPath)) {\n      require(\"fs\").unlinkSync(tokenPath);\n      debugLog(\"üóëÔ∏è Token cleared\");\n    }\n  } catch (error) {\n    debugLog(`‚ùå Error clearing token: ${error}`);\n  }\n}\n\n/**\n * Check if user is authenticated via CLI token\n */\nexport async function isAuthenticated(): Promise<boolean> {\n  debugLog(\"üîç Checking authentication...\");\n  const token = loadToken();\n  if (!token) {\n    debugLog(\"‚ùå No token found\");\n    return false;\n  }\n\n  try {\n    const result = await apiClient.authenticate(token);\n    debugLog(`üìã Auth result: ${JSON.stringify({ success: result.success })}`);\n    \n    if (result.success) {\n      debugLog(\"‚úÖ Authentication successful!\");\n      return true;\n    }\n    \n    // If token is invalid, clear it\n    if (result.error?.includes(\"Invalid\") || result.error?.includes(\"expired\")) {\n      debugLog(\"üóëÔ∏è Token invalid, clearing...\");\n      clearToken();\n    }\n    \n    debugLog(`‚ùå Auth failed: ${result.error}`);\n    return false;\n  } catch (error) {\n    debugLog(`‚ùå Auth error: ${error}`);\n    return false;\n  }\n}\n\n/**\n * Get current user info\n */\nexport async function getCurrentUser(): Promise<any> {\n  const token = loadToken();\n  if (!token) return null;\n\n  try {\n    const result = await apiClient.getCurrentUser();\n    return result.success ? result.data : null;\n  } catch (error) {\n    debugLog(`‚ùå Get user error: ${error}`);\n    return null;\n  }\n}\n\n/**\n * Logout by clearing the token\n */\nexport async function logout(): Promise<void> {\n  clearToken();\n}\n\n/**\n * Open browser to CLI token creation page\n */\nexport function openBrowser(): void {\n  const apiUrl = process.env.BETTER_ENV_API_URL || \"http://localhost:3000\";\n  const command = process.platform === \"darwin\" ? \"open\" : \n                  process.platform === \"win32\" ? \"start\" : \"xdg-open\";\n  \n  try {\n    require(\"child_process\").exec(`${command} ${apiUrl}/cli`);\n  } catch (error) {\n    console.log(`Please open your browser and go to: ${apiUrl}/cli`);\n  }\n}\n\n/**\n * Try to get CLI token from clipboard and authenticate\n */\nexport async function tryClipboardAuth(): Promise<{ success: boolean; token?: string }> {\n  try {\n    let clipboardToken = \"\";\n    \n    // Try to get clipboard content\n    if (process.platform === \"darwin\") {\n      const { execSync } = require(\"child_process\");\n      clipboardToken = execSync(\"pbpaste\", { encoding: \"utf8\" }).trim();\n    } else if (process.platform === \"win32\") {\n      const { execSync } = require(\"child_process\");\n      clipboardToken = execSync(\"powershell.exe Get-Clipboard\", { encoding: \"utf8\" }).trim();\n    } else {\n      // Linux - try xclip or xsel\n      const { execSync } = require(\"child_process\");\n      try {\n        clipboardToken = execSync(\"xclip -o -selection clipboard\", { encoding: \"utf8\" }).trim();\n      } catch {\n        try {\n          clipboardToken = execSync(\"xsel --clipboard --output\", { encoding: \"utf8\" }).trim();\n        } catch {\n          return { success: false };\n        }\n      }\n    }\n    \n    if (clipboardToken && clipboardToken.startsWith(\"cli_\")) {\n      // Validate token by authenticating with it\n      const result = await apiClient.authenticate(clipboardToken);\n      \n      if (result.success) {\n        saveToken(clipboardToken);\n        return { success: true, token: clipboardToken };\n      }\n    }\n    \n    return { success: false };\n  } catch (error) {\n    debugLog(`‚ùå Clipboard auth error: ${error}`);\n    return { success: false };\n  }\n}","import { createTRPCClient, httpBatchLink } from \"@trpc/client\";\nimport type { AppRouter } from \"@better-env/api\";\nimport superjson from \"superjson\";\nimport { loadToken } from \"../utils/auth\";\n\nconst API_BASE_URL = process.env.BETTER_ENV_API_URL || \"http://localhost:3000\";\n\n// Create a typed tRPC client that always gets fresh token\nexport const trpc = createTRPCClient<AppRouter>({\n  links: [\n    httpBatchLink({\n      url: `${API_BASE_URL}/api/trpc`,\n      transformer: superjson,\n      // Add CLI token to all requests - this loads fresh token on each request\n      headers() {\n        const token = loadToken();\n        console.log(`üîë Loading token for request: ${token ? 'Found' : 'Not found'}`);\n        return token\n          ? { Authorization: `Bearer ${token}` }\n          : {};\n      },\n    }),\n  ],\n});\n\n// Wrapper class for easier migration and additional CLI-specific features\nexport class TRPCApiClient {\n  constructor() {\n    // No need to cache token - tRPC client loads it fresh each time\n  }\n\n  // Get current token status\n  getCurrentToken() {\n    return loadToken();\n  }\n\n  // Check if we have a valid token\n  hasToken() {\n    const token = loadToken();\n    return token && token.startsWith('cli_');\n  }\n\n  // CLI-specific authentication method\n  async authenticate(token: string) {\n    try {\n      const result = await trpc.cli.auth.mutate({ token });\n      return {\n        success: true,\n        data: result.data,\n      };\n    } catch (error) {\n      console.error(\"CLI Auth Error:\", error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : \"Authentication failed\"\n      };\n    }\n  }\n\n  // Health check\n  async healthCheck() {\n    try {\n      const result = await trpc.healthCheck.query();\n      return { success: true, data: result };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Health check failed\" \n      };\n    }\n  }\n\n  // CLI-specific ping (requires authentication)\n  async ping() {\n    try {\n      const result = await trpc.cli.ping.query();\n      return { success: true, data: result };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Ping failed\" \n      };\n    }\n  }\n\n  // Get current user through CLI endpoint\n  async getCurrentUser() {\n    try {\n      const result = await trpc.cli.user.query();\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to get user\" \n      };\n    }\n  }\n\n  // List projects through CLI endpoint\n  async listProjects() {\n    try {\n      const result = await trpc.cli.projects.query();\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to list projects\" \n      };\n    }\n  }\n\n  // Get specific project through CLI endpoint\n  async getProject(id: string) {\n    try {\n      const result = await trpc.cli.project.query({ id });\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to get project\" \n      };\n    }\n  }\n\n  // Create project through main projects router (requires session auth)\n  async createProject(data: {\n    name: string;\n    logoUrl?: string;\n    envs?: Array<{\n      key: string;\n      value: string;\n      description?: string;\n      environmentName?: string;\n    }>;\n    organizationId?: string;\n  }) {\n    try {\n      const result = await trpc.projects.create.mutate(data);\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to create project\" \n      };\n    }\n  }\n\n  // Update project\n  async updateProject(data: {\n    id: string;\n    name?: string;\n    logoUrl?: string;\n  }) {\n    try {\n      const result = await trpc.projects.update.mutate(data);\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to update project\" \n      };\n    }\n  }\n\n  // Delete project\n  async deleteProject(id: string) {\n    try {\n      const result = await trpc.projects.delete.mutate({ id });\n      return { success: true, data: result };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to delete project\" \n      };\n    }\n  }\n\n  // Add environment variable\n  async addEnvVar(data: {\n    projectId: string;\n    env: {\n      key: string;\n      value: string;\n      description?: string;\n      environmentName?: string;\n    };\n  }) {\n    try {\n      const result = await trpc.projects.envs.add.mutate(data);\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to add environment variable\" \n      };\n    }\n  }\n\n  // Update environment variable\n  async updateEnvVar(data: {\n    id: string;\n    projectId: string;\n    key?: string;\n    value?: string;\n    description?: string;\n    environmentName?: string;\n  }) {\n    try {\n      const result = await trpc.projects.envs.update.mutate(data);\n      return { success: true, data: result.data };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to update environment variable\" \n      };\n    }\n  }\n\n  // Delete environment variable\n  async deleteEnvVar(data: {\n    id: string;\n    projectId: string;\n  }) {\n    try {\n      const result = await trpc.projects.envs.delete.mutate(data);\n      return { success: true, data: result };\n    } catch (error) {\n      return { \n        success: false, \n        error: error instanceof Error ? error.message : \"Failed to delete environment variable\" \n      };\n    }\n  }\n}\n\n// Export singleton instance for backward compatibility\nexport const apiClient = new TRPCApiClient();\n\n// Export the raw tRPC client for direct use\nexport { trpc as trpcClient };\n\n// Types\nexport interface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}","// Debouncing utility\nlet lastSelectionTime = 0\nconst SELECTION_DEBOUNCE_MS = 300\n\nimport fs from 'fs'\n\n// Debug logger that writes to file\nconst debugLog = (message: string) => {\n  fs.appendFileSync('/tmp/cli-debug.log', `${new Date().toISOString()} ${message}\\n`)\n}\n\nexport function handleDebouncedSelection(callback: () => void): void {\n  const now = Date.now()\n  if (now - lastSelectionTime < SELECTION_DEBOUNCE_MS) {\n    return // Ignore rapid selections\n  }\n  lastSelectionTime = now\n  callback()\n}\n\n// Screen management\nexport function createScreenManager() {\n  let currentScreen = \"splash\"\n  let currentScreenElements: any[] = []\n  let focusedSelectElement: any = null\n  let parentContainer: any = null\n\n  function setParentContainer(container: any) {\n    parentContainer = container\n         debugLog(\"üì¶ Parent container set for screen manager\")\n  }\n\n  function setCurrentScreen(screen: string) {\n    currentScreen = screen\n  }\n\n  function getCurrentScreen() {\n    return currentScreen\n  }\n\n  function clearScreen() {\n         debugLog(`üßπ Clearing screen (${currentScreenElements.length} elements)`)\n    if (focusedSelectElement) {\n      focusedSelectElement.blur()\n      focusedSelectElement = null\n    }\n\n    currentScreenElements.forEach((element) => {\n      if (element && element.id) {\n        try {\n          if (parentContainer) {\n            parentContainer.remove(element.id)\n          }\n          element.destroy?.()\n        } catch (error) {\n          // Ignore cleanup errors\n        }\n      }\n    })\n\n    currentScreenElements = []\n  }\n\n  function addElement(element: any) {\n    if (element) {\n             debugLog(`‚ûï Adding element: ${element.id}`)\n      currentScreenElements.push(element)\n      if (parentContainer) {\n        parentContainer.add(element)\n                 debugLog(`‚úÖ Element ${element.id} added to parent container`)\n      } else {\n                 debugLog(`‚ùå No parent container to add element ${element.id}`)\n      }\n    }\n  }\n\n  function setFocusedElement(element: any) {\n    if (focusedSelectElement && focusedSelectElement !== element) {\n      focusedSelectElement.blur()\n    }\n    focusedSelectElement = element\n    if (element && element.focus) {\n      element.focus()\n    }\n  }\n\n  function cleanup() {\n    if (focusedSelectElement) {\n      focusedSelectElement.destroy()\n    }\n\n    currentScreenElements.forEach((element) => {\n      if (element && element.destroy) {\n        element.destroy()\n      }\n    })\n  }\n\n  return {\n    setCurrentScreen,\n    getCurrentScreen,\n    clearScreen,\n    addElement,\n    setFocusedElement,\n    cleanup,\n    setParentContainer,\n  }\n}\n\n// Mock command implementations\nexport async function runPull(projectId: string): Promise<void> {\n  console.log(`Pulling environment variables from project ${projectId}...`)\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  console.log(\"Pull completed successfully!\")\n}\n\nexport async function runPush(projectId: string): Promise<void> {\n  console.log(`Pushing environment variables to project ${projectId}...`)\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  console.log(\"Push completed successfully!\")\n}\n\nexport async function runExample(name = \"world\"): Promise<string> {\n  console.log(`Running example command...`)\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  console.log(`Hello, ${name}!`)\n  return `Hello, ${name}`\n}\n","import { TextRenderable, RGBA, FrameBufferRenderable, renderFontToFrameBuffer, BoxRenderable, SelectRenderable, type SelectOption, BorderStyle } from \"@opentui/core\"\n\n// Colors\nexport const colors = {\n  background: \"#141414\",\n  primary: \"#e2e8f0\",\n  secondary: \"#94a3b8\",\n  muted: \"#64748b\",\n  accent: \"#ffff00\",\n  success: \"#00ff00\",\n  error: \"#ff0000\",\n  warning: \"#ffaa00\",\n  info: \"#00ffff\",\n  \n  // Box colors\n  boxBg: \"#2a2a2a\",\n  boxBorder: \"#404040\",\n  instructionsBg: \"#151515\",\n  instructionsBorder: \"#2a2a2a\",\n  \n  // Select colors\n  selectBg: \"#151515\",\n  selectFocusedBg: \"#252525\",\n  selectText: \"#b0b0b0\",\n  selectFocusedText: \"#e0e0e0\",\n  selectSelectedBg: \"#404040\",\n  selectSelectedText: \"#ffffff\",\n  selectDescriptionColor: \"#707070\",\n  selectSelectedDescriptionColor: \"#a0a0a0\",\n  \n  // Input colors\n  inputBg: \"#1a1a1a\",\n  inputText: \"#ffffff\",\n  inputPlaceholder: \"#666666\",\n  inputCursor: \"#ffff00\",\n}\n\n// Common styles for SelectRenderable\nexport const selectStyles = {\n  backgroundColor: colors.selectBg,\n  focusedBackgroundColor: colors.selectFocusedBg,\n  textColor: colors.selectText,\n  focusedTextColor: colors.selectFocusedText,\n  selectedBackgroundColor: colors.selectSelectedBg,\n  selectedTextColor: colors.selectSelectedText,\n  descriptionColor: colors.selectDescriptionColor,\n  selectedDescriptionColor: colors.selectSelectedDescriptionColor,\n  showScrollIndicator: true,\n  wrapSelection: true,\n  showDescription: true,\n  zIndex: 15,\n}\n\n// ASCII Logo\nexport function createLogo(renderer: any, position: { left: number; top: number }): FrameBufferRenderable {\n  const buffer = new FrameBufferRenderable(\"ascii-art\", {\n    width: renderer.terminalWidth,\n    height: 8,\n    positionType: \"absolute\",\n    position,\n    zIndex: 20,\n  })\n\n  renderFontToFrameBuffer(buffer.frameBuffer, {\n    text: \"BETTER ENV\",\n    x: 5,\n    y: 1,\n    fg: RGBA.fromInts(255, 100, 100, 255),\n    bg: RGBA.fromInts(0, 0, 40, 255),\n    font: \"block\",\n  })\n\n  return buffer\n}\n\n// Common box creator\nexport function createBox(\n  id: string,\n  title: string,\n  position: { left: number; top: number },\n  size: { width: number; height: number },\n  options: Partial<{\n    bg: string\n    borderStyle: string\n    borderColor: string\n    titleAlignment: string\n    zIndex: number\n  }> = {}\n): BoxRenderable {\n  return new BoxRenderable(id, {\n    positionType: \"absolute\",\n    position,\n    width: size.width,\n    height: size.height,\n    bg: options.bg || colors.boxBg,\n    borderStyle: options.borderStyle as BorderStyle || \"rounded\",\n    borderColor: options.borderColor || colors.boxBorder,\n    title,\n    titleAlignment: options.titleAlignment as \"center\" | \"left\" | \"right\" | undefined || \"center\",\n    zIndex: options.zIndex || 10,\n  })\n}\n\n// Common select creator\nexport function createSelect(\n  id: string,\n  options: SelectOption[],\n  position: { left: number; top: number },\n  size: { width: number; height: number }\n): SelectRenderable {\n  return new SelectRenderable(id, {\n    positionType: \"absolute\",\n    position,\n    width: size.width,\n    height: size.height,\n    options,\n    ...selectStyles,\n  })\n}\n\n// Common text creator\nexport function createText(\n  id: string,\n  content: string,\n  position: { left: number; top: number },\n  options: Partial<{\n    fg: string\n    bg: string\n    zIndex: number\n  }> = {}\n): TextRenderable {\n  return new TextRenderable(id, {\n    content,\n    positionType: \"absolute\",\n    position,\n    fg: options.fg || colors.primary,\n    bg: options.bg || \"transparent\",\n    zIndex: options.zIndex || 20,\n  })\n}\n\n// Center calculation helpers\nexport function centerX(renderer: any, width: number): number {\n  return Math.floor((renderer.terminalWidth - width) / 2)\n}\n\nexport function centerY(renderer: any, height: number): number {\n  return Math.floor((renderer.terminalHeight - height) / 2)\n}\n\n// Control text\nexport const controlsText = \"‚Üë‚Üì: Navigate | Enter: Select | Esc: Back\"\n","import { CliRenderer, InputRenderable, InputRenderableEvents, SelectRenderableEvents, type SelectOption } from \"@opentui/core\"\nimport { createBox, createText, createSelect, centerX, colors } from \"../ui/ui\"\nimport { saveToken, isAuthenticated, tryClipboardAuth, openBrowser } from \"../utils/auth\"\nimport fs from 'fs'\n\n// Debug logger that writes to file\nconst debugLog = (message: string) => {\n  fs.appendFileSync('/tmp/cli-debug.log', `${new Date().toISOString()} ${message}\\n`)\n}\n\nexport interface AuthScreens {\n  showLoginScreen: () => void\n  showTokenInput: () => void\n  showAuthError: () => void\n  showAuthenticating: () => void\n}\n\nexport function createAuthScreens(\n  renderer: CliRenderer,\n  parentContainer: any,\n  addElement: (element: any) => void,\n  clearScreen: () => void,\n  setCurrentScreen: (screen: string) => void,\n  showSplashScreen: () => void,\n  onTokenSet: (token: string) => void\n): AuthScreens {\n  let tokenInput: InputRenderable | null = null\n\n  function showLoginScreen() {\n    debugLog(\"üîë Showing login screen...\")\n    clearScreen()\n    setCurrentScreen(\"login\")\n\n    if (!parentContainer) {\n      debugLog(\"‚ùå No parent container for login screen!\")\n      return\n    }\n\n    const titleBox = createBox(\n      \"login-title\",\n      \"Authentication Required\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const step1 = createText(\n      \"login-step1\",\n      \"1. Go to http://localhost:3000/cli to create a CLI token\",\n      { left: centerX(renderer, 55), top: 10 },\n      { fg: colors.secondary }\n    )\n    addElement(step1)\n\n    const step2 = createText(\n      \"login-step2\",\n      \"2. Copy the generated token\",\n      { left: centerX(renderer, 30), top: 11 },\n      { fg: colors.secondary }\n    )\n    addElement(step2)\n\n    const step3 = createText(\n      \"login-step3\",\n      \"3. Press 't' to enter token, 'o' to open browser, 'c' for clipboard, SPACE to continue, or 'q' to quit\",\n      { left: centerX(renderer, 85), top: 13 },\n      { fg: colors.muted }\n    )\n    addElement(step3)\n  }\n\n  function showTokenInput() {\n    debugLog(\"üìù Showing token input screen...\")\n    clearScreen()\n    setCurrentScreen(\"token-input\")\n\n    if (!parentContainer) {\n      debugLog(\"‚ùå No parent container for token input!\")\n      return\n    }\n\n    const titleBox = createBox(\n      \"token-title\",\n      \"Enter CLI Token\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const instructionsBox = createBox(\n      \"token-instructions\",\n      \"Instructions\",\n      { left: centerX(renderer, 80), top: 12 },\n      { width: 80, height: 8 },\n      {\n        bg: colors.instructionsBg,\n        borderStyle: \"single\",\n        borderColor: colors.instructionsBorder,\n      }\n    )\n    addElement(instructionsBox)\n\n    const instructions = [\n      \"1. Go to http://localhost:3000/cli in your browser\",\n      \"2. Log in to your account\",\n      \"3. Create a new CLI token\",\n      \"4. Copy the generated token\",\n      \"5. Paste it below and press Enter\",\n      \"6. Token should start with 'cli_'\",\n    ]\n\n    instructions.forEach((instruction, index) => {\n      const instructionText = createText(\n        `instruction-${index}`,\n        instruction,\n        { left: centerX(renderer, 76), top: 14 + index },\n        { fg: colors.selectText }\n      )\n      addElement(instructionText)\n    })\n\n    const inputPrompt = createText(\n      \"token-prompt\",\n      \"CLI Token:\",\n      { left: centerX(renderer, 76), top: 22 },\n      { fg: colors.primary }\n    )\n    addElement(inputPrompt)\n\n    const pasteHint = createText(\n      \"paste-hint\",\n      \"üí° Tip: You can paste with Ctrl+V (or Cmd+V on Mac)\",\n      { left: centerX(renderer, 50), top: 24 },\n      { fg: colors.muted }\n    )\n    addElement(pasteHint)\n\n    tokenInput = new InputRenderable(\"token-input\", {\n      positionType: \"absolute\",\n      position: {\n        left: centerX(renderer, 76) + 12,\n        top: 22,\n      },\n      width: 60,\n      height: 3,\n      zIndex: 100,\n      backgroundColor: colors.inputBg,\n      textColor: colors.inputText,\n      placeholder: \"cli_...\",\n      placeholderColor: colors.inputPlaceholder,\n      cursorColor: colors.inputCursor,\n      value: \"\",\n      maxLength: 200,\n    })\n\n    if (renderer && parentContainer) {\n      renderer.root.add(tokenInput)\n      tokenInput.focus()\n    }\n\n    tokenInput.on(InputRenderableEvents.ENTER, async (value: string) => {\n      debugLog(`üîë Token submitted: length=${value.length}, starts with cli_: ${value.startsWith(\"cli_\")}`)\n      const token = value.trim()\n      \n      if (!token) {\n        debugLog(\"‚ùå Empty token, returning to login screen\")\n        showLoginScreen()\n        return\n      }\n      \n      if (!token.startsWith(\"cli_\")) {\n        debugLog(\"‚ùå Invalid token format (doesn't start with cli_)\")\n        showAuthError()\n        return\n      }\n      \n      debugLog(\"üíæ Saving token...\")\n      saveToken(token)\n      debugLog(\"üì¢ Calling onTokenSet callback...\")\n      onTokenSet(token)\n      \n      debugLog(\"üîç Verifying authentication...\")\n      if (await isAuthenticated()) {\n        debugLog(\"‚úÖ Authentication successful!\")\n        if (tokenInput && renderer) {\n          renderer.root.remove(tokenInput.id)\n          tokenInput.destroy()\n          tokenInput = null\n        }\n        debugLog(\"üéØ Showing splash screen...\")\n        showSplashScreen()\n      } else {\n        debugLog(\"‚ùå Authentication failed after token save\")\n        if (tokenInput && renderer) {\n          renderer.root.remove(tokenInput.id)\n          tokenInput.destroy()\n          tokenInput = null\n        }\n        showAuthError()\n      }\n    })\n  }\n\n  function showAuthenticating() {\n    debugLog(\"‚è≥ Showing authenticating screen...\")\n    clearScreen()\n    setCurrentScreen(\"authenticating\")\n\n    if (!parentContainer) {\n      debugLog(\"‚ùå No parent container for authenticating screen!\")\n      return\n    }\n\n    const statusBox = createBox(\n      \"auth-status\",\n      \"Authenticating...\",\n      { left: centerX(renderer, 80), top: 10 },\n      { width: 80, height: 6 },\n      {\n        borderStyle: \"single\",\n      }\n    )\n    addElement(statusBox)\n\n    const statusText = createText(\n      \"auth-status-text\",\n      \"Opening browser for authentication...\",\n      { left: centerX(renderer, 76), top: 12 },\n      { fg: colors.primary }\n    )\n    addElement(statusText)\n  }\n\n  function showAuthError() {\n    clearScreen()\n    setCurrentScreen(\"auth-error\")\n\n    if (!parentContainer) return\n\n    const errorBox = createBox(\n      \"error-title\",\n      \"Authentication Failed\",\n      { left: centerX(renderer, 80), top: 10 },\n      { width: 80, height: 6 },\n      {\n        borderStyle: \"single\",\n      }\n    )\n    addElement(errorBox)\n\n    const errorText = createText(\n      \"error-text\",\n      \"Failed to authenticate. Press any key to try again.\",\n      { left: centerX(renderer, 50), top: 12 },\n      { fg: colors.primary }\n    )\n    addElement(errorText)\n  }\n\n  // Cleanup function for token input\n  function cleanupTokenInput() {\n    if (tokenInput && renderer) {\n      renderer.root.remove(tokenInput.id)\n      tokenInput.destroy()\n      tokenInput = null\n    }\n  }\n\n  return {\n    showLoginScreen,\n    showTokenInput,\n    showAuthError,\n    showAuthenticating,\n    cleanupTokenInput,\n  } as AuthScreens & { cleanupTokenInput: () => void }\n}\n","import { CliRenderer, SelectRenderableEvents, type SelectOption } from \"@opentui/core\"\nimport { createBox, createText, createSelect, centerX, colors, controlsText as controlsHelpText, createLogo } from \"../ui/ui\"\n\nexport interface MainMenuScreen {\n  showSplashScreen: () => void\n  showMainMenu: () => void\n}\n\nconst mainMenuOptions: SelectOption[] = [\n  { name: \"View Projects\", description: \"See all your projects and their environment variables\", value: \"projects\" },\n  { name: \"Create New Project\", description: \"Start a new project with environment setup\", value: \"create\" },\n  { name: \"Pull Environment Variables\", description: \"Download env vars from a project\", value: \"pull\" },\n  { name: \"Push Environment Variables\", description: \"Upload env vars to a project\", value: \"push\" },\n  { name: \"Profile\", description: \"View user profile and logout\", value: \"profile\" },\n  { name: \"Settings\", description: \"Configure CLI preferences\", value: \"settings\" },\n  { name: \"Quit\", description: \"Exit the Better Env CLI\", value: \"quit\" },\n]\n\nexport function createMainMenuScreen(\n  renderer: CliRenderer,\n  parentContainer: any,\n  addElement: (element: any) => void,\n  clearScreen: () => void,\n  setCurrentScreen: (screen: string) => void,\n  handleDebouncedSelection: (callback: () => void) => void,\n  handleMenuSelection: (value: string) => Promise<void>\n): MainMenuScreen {\n\n  function showSplashScreen() {\n    clearScreen()\n    setCurrentScreen(\"splash\")\n\n    if (!parentContainer) return\n\n    // Create logo\n    const logo = createLogo(renderer, { left: 0, top: 2 })\n    addElement(logo)\n\n    const subtitleText = createText(\n      \"subtitle\",\n      \"Better Env CLI - Press any key to continue\",\n      { left: 2, top: 12 },\n      {\n        fg: \"#6666ff\",\n        bg: \"#002840\",\n      }\n    )\n    addElement(subtitleText)\n\n    const versionText = createText(\n      \"version\",\n      \"v1.0.0\",\n      { left: 2, top: 14 },\n      {\n        fg: colors.muted,\n        bg: \"transparent\",\n      }\n    )\n    addElement(versionText)\n  }\n\n  function showMainMenu() {\n    clearScreen()\n    setCurrentScreen(\"main\")\n\n    if (!parentContainer) return\n\n    const titleBox = createBox(\n      \"main-title\",\n      \"Better Env CLI - Main Menu\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const menuSelect = createSelect(\n      \"main-menu\",\n      mainMenuOptions,\n      { left: centerX(renderer, 76), top: 8 },\n      { width: 76, height: 8 }\n    )\n\n    menuSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n      handleDebouncedSelection(async () => {\n        await handleMenuSelection(option.value as string)\n      })\n    })\n\n    addElement(menuSelect)\n\n    const controlsTextElement = createText(\n      \"controls-text\",\n      controlsHelpText,\n      { left: centerX(renderer, 40), top: 18 },\n      { fg: colors.muted }\n    )\n    addElement(controlsTextElement)\n\n    // Auto-focus the menu\n    setTimeout(() => {\n      if (menuSelect) {\n        menuSelect.focus()\n      }\n    }, 100)\n  }\n\n  return {\n    showSplashScreen,\n    showMainMenu,\n  }\n}\n","import { CliRenderer, SelectRenderableEvents, type SelectOption } from \"@opentui/core\"\nimport { createBox, createText, createSelect, centerX, colors, controlsText as controlsHelpText } from \"../ui/ui\"\nimport { apiClient } from \"../lib/trpc-client\"\nimport fs from 'fs'\n\n// Debug logger that writes to file\nconst debugLog = (message: string) => {\n  fs.appendFileSync('/tmp/cli-debug.log', `${new Date().toISOString()} ${message}\\n`)\n}\n\nexport interface ProjectScreens {\n  showProjects: () => Promise<void>\n  showCreateProject: () => void\n  showProjectDetails: (projectId: string) => Promise<void>\n  showProjectEnvVars: (projectId: string) => Promise<void>\n  showPullEnv: () => Promise<void>\n  showPullConfirm: (projectId: string) => Promise<void>\n  showPushEnv: () => Promise<void>\n  showPushVarSelection: (projectId: string) => void\n  showPushConfirm: (projectId: string, varKey: string) => void\n  showEnvVarDetails: (projectId: string, envVar: any) => void\n}\n\n// Mock data\nconst mockProjects = [\n  { id: \"1\", name: \"my-api\", envCount: 12, description: \"Backend API service\" },\n  { id: \"2\", name: \"frontend-app\", envCount: 8, description: \"React frontend application\" },\n  { id: \"3\", name: \"database-service\", envCount: 15, description: \"Database microservice\" },\n]\n\nconst mockEnvVars = [\n  { key: \"DATABASE_URL\", value: \"postgresql://...\", environment: \"production\" },\n  { key: \"API_KEY\", value: \"sk_...\", environment: \"production\" },\n  { key: \"DEBUG\", value: \"false\", environment: \"production\" },\n  { key: \"PORT\", value: \"3000\", environment: \"development\" },\n  { key: \"NODE_ENV\", value: \"development\", environment: \"development\" },\n]\n\nexport function createProjectScreens(\n  renderer: CliRenderer,\n  parentContainer: any,\n  addElement: (element: any) => void,\n  clearScreen: () => void,\n  setCurrentScreen: (screen: string) => void,\n  handleDebouncedSelection: (callback: () => void) => void,\n  showMainMenu: () => void,\n  runPull: (projectId: string) => Promise<void>,\n  runPush: (projectId: string) => Promise<void>\n): ProjectScreens {\n\n  async function showProjects() {\n    debugLog(\"üìã Showing projects screen...\")\n    clearScreen()\n    setCurrentScreen(\"projects\")\n\n    if (!parentContainer) return\n\n    const titleBox = createBox(\n      \"projects-title\",\n      \"Your Projects\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading projects...\",\n      { left: centerX(renderer, 20), top: 12 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      debugLog(\"üåê Fetching projects from API...\")\n      const response = await apiClient.listProjects()\n      debugLog(`üì¶ Projects response: ${JSON.stringify({ success: response.success, count: response.data?.personal.length || 0 })}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (response.success && response.data) {\n        const projects = response.data.personal\n        debugLog(`‚úÖ Got ${projects.length} projects`)\n\n        if (projects.length === 0) {\n          const noProjectsText = createText(\n            \"no-projects-text\",\n            \"No projects found. Create your first project!\",\n            { left: centerX(renderer, 45), top: 12 },\n            { fg: colors.muted }\n          )\n          addElement(noProjectsText)\n\n          const createHint = createText(\n            \"create-hint\",\n            \"Press 'c' to create a new project or Escape to go back\",\n            { left: centerX(renderer, 50), top: 14 },\n            { fg: colors.secondary }\n          )\n          addElement(createHint)\n          return\n        }\n\n        const projectOptions: SelectOption[] = projects.map(project => ({\n          name: project.name,\n          description: `${project.envCount} environment variables`,\n          value: project.id,\n        }))\n\n        const projectSelect = createSelect(\n          \"projects-list\",\n          projectOptions,\n          { left: centerX(renderer, 76), top: 8 },\n          { width: 76, height: 12 }\n        )\n\n        projectSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n          handleDebouncedSelection(async () => {\n            await showProjectDetails(option.value as string)\n          })\n        })\n\n        addElement(projectSelect)\n\n        const controlsTextElement = createText(\n          \"controls-text\",\n          controlsHelpText,\n          { left: centerX(renderer, 40), top: 22 },\n          { fg: colors.muted }\n        )\n        addElement(controlsTextElement)\n\n        // Auto-focus\n        setTimeout(() => {\n          if (projectSelect) {\n            projectSelect.focus()\n          }\n        }, 100)\n\n      } else {\n        debugLog(\"‚ùå Failed to fetch projects\")\n        const errorText = createText(\n          \"error-text\",\n          \"Failed to load projects. Check your connection.\",\n          { left: centerX(renderer, 45), top: 12 },\n          { fg: colors.error }\n        )\n        addElement(errorText)\n      }\n    } catch (error) {\n      debugLog(`‚ùå Error fetching projects: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading projects. Please try again.\",\n        { left: centerX(renderer, 40), top: 12 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n    }\n  }\n\n  function showCreateProject() {\n    clearScreen()\n    setCurrentScreen(\"create-project\")\n\n    if (!parentContainer) return\n\n    const titleBox = createBox(\n      \"create-title\",\n      \"Create New Project\",\n      { left: centerX(renderer, 80), top: 8 },\n      { width: 80, height: 8 }\n    )\n    addElement(titleBox)\n\n    const instructionText = createText(\n      \"create-instruction\",\n      \"This feature will be available soon. Use the web interface at http://localhost:3000\",\n      { left: centerX(renderer, 70), top: 12 },\n      { fg: colors.secondary }\n    )\n    addElement(instructionText)\n\n    const backText = createText(\n      \"create-back\",\n      \"Press 'Esc' or 'Backspace' to go back to main menu\",\n      { left: centerX(renderer, 45), top: 16 },\n      { fg: colors.muted }\n    )\n    addElement(backText)\n  }\n\n  async function showProjectDetails(projectId: string) {\n    debugLog(`üîç Showing project details for ID: ${projectId}`)\n    clearScreen()\n    setCurrentScreen(`project-details-${projectId}`)\n\n    if (!parentContainer) {\n      debugLog(\"‚ùå No parent container for project details\")\n      return\n    }\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading project details...\",\n      { left: centerX(renderer, 25), top: 12 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      // Fetch project details from API\n      debugLog(\"üåê Fetching project details from API...\")\n      const response = await apiClient.getProject(projectId)\n      debugLog(`üì¶ Project details response: ${JSON.stringify({ success: response.success, hasData: !!response.data })}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (!response.success || !response.data) {\n        debugLog(\"‚ùå Failed to fetch project details\")\n        const errorText = createText(\n          \"error-text\",\n          \"Failed to load project details. Please try again.\",\n          { left: centerX(renderer, 45), top: 12 },\n          { fg: colors.error }\n        )\n        addElement(errorText)\n        return\n      }\n\n      const project = response.data\n      debugLog(`‚úÖ Project details loaded: ${project.name}`)\n\n      const titleBox = createBox(\n        \"project-details-title\",\n        `Project: ${project.name}`,\n        { left: centerX(renderer, 80), top: 6 },\n        { width: 80, height: 3 }\n      )\n      addElement(titleBox)\n\n      const detailsText = createText(\n        \"project-details-info\",\n        `ID: ${project.id}\\nName: ${project.name}\\nEnvironment Variables: ${project.envs?.length || 0}`,\n        { left: centerX(renderer, 76), top: 10 },\n        { fg: colors.secondary }\n      )\n      addElement(detailsText)\n\n      const actionOptions: SelectOption[] = [\n        { name: \"View Environment Variables\", description: \"Browse all env vars for this project\", value: \"envvars\" },\n        { name: \"Back to Projects\", description: \"Return to projects list\", value: \"back\" },\n      ]\n\n      const actionSelect = createSelect(\n        \"project-actions\",\n        actionOptions,\n        { left: centerX(renderer, 76), top: 18 },\n        { width: 76, height: 2 }\n      )\n\n      actionSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n        handleDebouncedSelection(async () => {\n          if (option.value === \"envvars\") {\n            await showProjectEnvVars(projectId)\n          } else if (option.value === \"back\") {\n            await showProjects()\n          }\n        })\n      })\n\n      addElement(actionSelect)\n\n      // Auto-focus\n      setTimeout(() => {\n        if (actionSelect) {\n          actionSelect.focus()\n        }\n      }, 100)\n\n    } catch (error) {\n      debugLog(`‚ùå Error fetching project details: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading project details. Please try again.\",\n        { left: centerX(renderer, 45), top: 12 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n      return\n    }\n  }\n\n  async function showProjectEnvVars(projectId: string) {\n    debugLog(`üîß Showing environment variables for project: ${projectId}`)\n    clearScreen()\n    setCurrentScreen(`project-envvars-${projectId}`)\n\n    if (!parentContainer) {\n      debugLog(\"‚ùå No parent container for env vars\")\n      return\n    }\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading environment variables...\",\n      { left: centerX(renderer, 35), top: 12 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      // Fetch project details with environment variables\n      debugLog(\"üåê Fetching project details for env vars...\")\n      const response = await apiClient.getProject(projectId)\n      debugLog(`üì¶ Env vars response: ${JSON.stringify({ success: response.success, envCount: response.data?.envs?.length || 0 })}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (!response.success || !response.data) {\n        debugLog(\"‚ùå Failed to fetch project env vars\")\n        const errorText = createText(\n          \"error-text\",\n          \"Failed to load environment variables. Please try again.\",\n          { left: centerX(renderer, 50), top: 12 },\n          { fg: colors.error }\n        )\n        addElement(errorText)\n        return\n      }\n\n      const project = response.data\n      debugLog(`‚úÖ Project env vars loaded: ${project.envs?.length || 0} variables`)\n\n      const titleBox = createBox(\n        \"envvars-title\",\n        `Environment Variables - ${project.name}`,\n        { left: centerX(renderer, 80), top: 6 },\n        { width: 80, height: 3 }\n      )\n      addElement(titleBox)\n\n      if (!project.envs || project.envs.length === 0) {\n        const noEnvText = createText(\n          \"no-env-text\",\n          \"No environment variables found for this project.\",\n          { left: centerX(renderer, 45), top: 12 },\n          { fg: colors.muted }\n        )\n        addElement(noEnvText)\n\n        const backHint = createText(\n          \"back-hint\",\n          \"Press Escape to go back to project details\",\n          { left: centerX(renderer, 40), top: 14 },\n          { fg: colors.secondary }\n        )\n        addElement(backHint)\n        return\n      }\n\n      const envOptions: SelectOption[] = project.envs.map(envVar => ({\n        name: envVar.key,\n        description: `${envVar.environmentName}: ${envVar.value.substring(0, 30)}...`,\n        value: envVar.id,\n      }))\n\n      const envSelect = createSelect(\n        \"env-list\",\n        envOptions,\n        { left: centerX(renderer, 76), top: 8 },\n        { width: 76, height: 12 }\n      )\n\n      envSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n        handleDebouncedSelection(() => {\n          const envVar = project.envs?.find(e => e.id === option.value)\n          if (envVar) {\n            showEnvVarDetails(projectId, envVar)\n          }\n        })\n      })\n\n      addElement(envSelect)\n\n      const controlsTextElement = createText(\n        \"controls-text\",\n        controlsHelpText,\n        { left: centerX(renderer, 40), top: 22 },\n        { fg: colors.muted }\n      )\n      addElement(controlsTextElement)\n\n      // Auto-focus\n      setTimeout(() => {\n        if (envSelect) {\n          envSelect.focus()\n        }\n      }, 100)\n\n    } catch (error) {\n      debugLog(`‚ùå Error fetching project env vars: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading environment variables. Please try again.\",\n        { left: centerX(renderer, 50), top: 12 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n    }\n  }\n\n  function showEnvVarDetails(projectId: string, envVar: any) {\n    debugLog(`üîç Showing env var details: ${envVar.key}`)\n    clearScreen()\n    setCurrentScreen(\"env-var-details\")\n\n    if (!envVar || !parentContainer) {\n      debugLog(\"‚ùå No env var or parent container\")\n      return\n    }\n\n    const titleBox = createBox(\n      \"env-detail-title\",\n      `Environment Variable: ${envVar.key}`,\n      { left: centerX(renderer, 80), top: 8 },\n      { width: 80, height: 10 }\n    )\n    addElement(titleBox)\n\n    // Show environment variable details\n    const detailsText = createText(\n      \"env-details\",\n      `Key: ${envVar.key}\\nValue: ${envVar.value}\\nEnvironment: ${envVar.environmentName || 'default'}\\nDescription: ${envVar.description || 'No description'}\\nCreated: ${new Date(envVar.createdAt).toLocaleDateString()}`,\n      { left: centerX(renderer, 76), top: 12 },\n      { fg: colors.secondary }\n    )\n    addElement(detailsText)\n\n    const actionOptions: SelectOption[] = [\n      { name: \"Copy Value\", description: \"Copy the environment variable value to clipboard\", value: \"copy\" },\n      { name: \"Back to Environment Variables\", description: \"Return to environment variables list\", value: \"back\" },\n    ]\n\n    const actionSelect = createSelect(\n      \"env-actions\",\n      actionOptions,\n      { left: centerX(renderer, 76), top: 19 },\n      { width: 76, height: 2 }\n    )\n\n    actionSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n      handleDebouncedSelection(async () => {\n        if (option.value === \"copy\") {\n          // Copy to clipboard\n          try {\n            if (process.platform === \"darwin\") {\n              require(\"child_process\").execSync(`echo \"${envVar.value}\" | pbcopy`)\n            } else if (process.platform === \"win32\") {\n              require(\"child_process\").execSync(`echo \"${envVar.value}\" | clip`)\n            } else {\n              // Linux\n              require(\"child_process\").execSync(`echo \"${envVar.value}\" | xclip -selection clipboard`)\n            }\n            \n            // Show success message briefly\n            const successText = createText(\n              \"copy-success\",\n              \"‚úÖ Value copied to clipboard!\",\n              { left: centerX(renderer, 30), top: 23 },\n              { fg: colors.success }\n            )\n            addElement(successText)\n            \n            setTimeout(() => {\n              if (parentContainer) {\n                parentContainer.remove(\"copy-success\")\n              }\n            }, 2000)\n          } catch (error) {\n            debugLog(`‚ùå Error copying to clipboard: ${error}`)\n            const errorText = createText(\n              \"copy-error\",\n              \"‚ùå Failed to copy to clipboard\",\n              { left: centerX(renderer, 30), top: 23 },\n              { fg: colors.error }\n            )\n            addElement(errorText)\n            \n            setTimeout(() => {\n              if (parentContainer) {\n                parentContainer.remove(\"copy-error\")\n              }\n            }, 2000)\n          }\n        } else if (option.value === \"back\") {\n          await showProjectEnvVars(projectId)\n        }\n      })\n    })\n\n    addElement(actionSelect)\n\n    // Auto-focus\n    setTimeout(() => {\n      if (actionSelect) {\n        actionSelect.focus()\n      }\n    }, 100)\n  }\n\n  async function showPullEnv() {\n    debugLog(\"üì• Showing pull environment variables screen...\")\n    clearScreen()\n    setCurrentScreen(\"pull-env\")\n\n    if (!parentContainer) return\n\n    const titleBox = createBox(\n      \"pull-title\",\n      \"Pull Environment Variables\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const instructionText = createText(\n      \"pull-instruction\",\n      \"Select a project to pull environment variables from:\",\n      { left: centerX(renderer, 50), top: 10 },\n      { fg: colors.secondary }\n    )\n    addElement(instructionText)\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading projects...\",\n      { left: centerX(renderer, 20), top: 14 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      debugLog(\"üåê Fetching projects for pull...\")\n      const response = await apiClient.listProjects()\n      debugLog(`üì¶ Pull projects response: ${JSON.stringify({ success: response.success, count: response.data?.personal.length || 0 })}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (!response.success || !response.data || response.data.personal.length === 0) {\n        debugLog(\"‚ùå No projects available for pull\")\n        const noProjectsText = createText(\n          \"no-projects-text\",\n          \"No projects available to pull from.\",\n          { left: centerX(renderer, 35), top: 14 },\n          { fg: colors.muted }\n        )\n        addElement(noProjectsText)\n\n        const backHint = createText(\n          \"back-hint\",\n          \"Press Escape to go back to main menu\",\n          { left: centerX(renderer, 35), top: 16 },\n          { fg: colors.secondary }\n        )\n        addElement(backHint)\n        return\n      }\n\n      const projectOptions: SelectOption[] = response.data.personal.map(project => ({\n        name: project.name,\n        description: `Pull ${project.envCount || 0} environment variables from ${project.name}`,\n        value: project.id,\n      }))\n\n      const projectSelect = createSelect(\n        \"pull-projects\",\n        projectOptions,\n        { left: centerX(renderer, 76), top: 12 },\n        { width: 76, height: 10 }\n      )\n\n      projectSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n        handleDebouncedSelection(async () => {\n          await showPullConfirm(option.value as string)\n        })\n      })\n\n      addElement(projectSelect)\n\n      const controlsTextElement = createText(\n        \"controls-text\",\n        controlsHelpText,\n        { left: centerX(renderer, 40), top: 24 },\n        { fg: colors.muted }\n      )\n      addElement(controlsTextElement)\n\n      // Auto-focus\n      setTimeout(() => {\n        if (projectSelect) {\n          projectSelect.focus()\n        }\n      }, 100)\n\n    } catch (error) {\n      debugLog(`‚ùå Error fetching projects for pull: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading projects. Please try again.\",\n        { left: centerX(renderer, 35), top: 14 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n    }\n  }\n\n  async function showPullConfirm(projectId: string) {\n    debugLog(`üì• Showing pull confirmation for project: ${projectId}`)\n    clearScreen()\n    setCurrentScreen(\"pull-confirm\")\n\n    if (!parentContainer) return\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading project details...\",\n      { left: centerX(renderer, 25), top: 12 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      // Get project details for confirmation\n      const response = await apiClient.getProject(projectId)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (!response.success || !response.data) {\n        debugLog(\"‚ùå Failed to fetch project for pull confirmation\")\n        const errorText = createText(\n          \"error-text\",\n          \"Failed to load project details. Please try again.\",\n          { left: centerX(renderer, 45), top: 12 },\n          { fg: colors.error }\n        )\n        addElement(errorText)\n        return\n      }\n\n      const project = response.data\n      const envCount = project.envs?.length || 0\n\n      const titleBox = createBox(\n        \"pull-confirm-title\",\n        \"Confirm Pull Operation\",\n        { left: centerX(renderer, 80), top: 8 },\n        { width: 80, height: 8 }\n      )\n      addElement(titleBox)\n\n      const confirmText = createText(\n        \"pull-confirm-text\",\n        `Are you sure you want to pull ${envCount} environment variables from \"${project.name}\"?\\n\\nThis will create/overwrite your local .env file.`,\n        { left: centerX(renderer, 70), top: 12 },\n        { fg: colors.secondary }\n      )\n      addElement(confirmText)\n\n      const confirmOptions: SelectOption[] = [\n        { name: \"Yes, Pull Variables\", description: `Download ${envCount} variables and write to .env file`, value: \"confirm\" },\n        { name: \"Cancel\", description: \"Go back without pulling\", value: \"cancel\" },\n      ]\n\n      const confirmSelect = createSelect(\n        \"pull-confirm-select\",\n        confirmOptions,\n        { left: centerX(renderer, 76), top: 18 },\n        { width: 76, height: 2 }\n      )\n\n      confirmSelect.on(SelectRenderableEvents.ITEM_SELECTED, async (index: number, option: SelectOption) => {\n        handleDebouncedSelection(async () => {\n          if (option.value === \"confirm\") {\n            await runPull(projectId)\n            await showPullEnv() // Go back to pull menu instead of main menu\n          } else {\n            await showPullEnv()\n          }\n        })\n      })\n\n      addElement(confirmSelect)\n\n      // Auto-focus\n      setTimeout(() => {\n        if (confirmSelect) {\n          confirmSelect.focus()\n        }\n      }, 100)\n\n    } catch (error) {\n      debugLog(`‚ùå Error loading project for pull confirmation: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading project details. Please try again.\",\n        { left: centerX(renderer, 45), top: 12 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n    }\n  }\n\n  async function showPushEnv() {\n    debugLog(\"üì§ Showing push environment variables screen...\")\n    clearScreen()\n    setCurrentScreen(\"push-env\")\n\n    if (!parentContainer) return\n\n    const titleBox = createBox(\n      \"push-title\",\n      \"Push Environment Variables\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const instructionText = createText(\n      \"push-instruction\",\n      \"Select a project to push environment variables to:\",\n      { left: centerX(renderer, 50), top: 10 },\n      { fg: colors.secondary }\n    )\n    addElement(instructionText)\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading projects...\",\n      { left: centerX(renderer, 20), top: 14 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      debugLog(\"üåê Fetching projects for push...\")\n      const response = await apiClient.listProjects()\n      debugLog(`üì¶ Push projects response: ${JSON.stringify({ success: response.success, count: response.data?.personal.length || 0 })}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (!response.success || !response.data || response.data.personal.length === 0) {\n        debugLog(\"‚ùå No projects available for push\")\n        const noProjectsText = createText(\n          \"no-projects-text\",\n          \"No projects available to push to.\",\n          { left: centerX(renderer, 35), top: 14 },\n          { fg: colors.muted }\n        )\n        addElement(noProjectsText)\n\n        const backHint = createText(\n          \"back-hint\",\n          \"Press Escape to go back to main menu\",\n          { left: centerX(renderer, 35), top: 16 },\n          { fg: colors.secondary }\n        )\n        addElement(backHint)\n        return\n      }\n\n      const projectOptions: SelectOption[] = response.data.personal.map(project => ({\n        name: project.name,\n        description: `Push variables to ${project.name}`,\n        value: project.id,\n      }))\n\n      const projectSelect = createSelect(\n        \"push-projects\",\n        projectOptions,\n        { left: centerX(renderer, 76), top: 12 },\n        { width: 76, height: 10 }\n      )\n\n      projectSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n        handleDebouncedSelection(async () => {\n          await showPushVarSelection(option.value as string)\n        })\n      })\n\n      addElement(projectSelect)\n\n      const controlsTextElement = createText(\n        \"controls-text\",\n        controlsHelpText,\n        { left: centerX(renderer, 40), top: 24 },\n        { fg: colors.muted }\n      )\n      addElement(controlsTextElement)\n\n      // Auto-focus\n      setTimeout(() => {\n        if (projectSelect) {\n          projectSelect.focus()\n        }\n      }, 100)\n\n    } catch (error) {\n      debugLog(`‚ùå Error fetching projects for push: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading projects. Please try again.\",\n        { left: centerX(renderer, 35), top: 14 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n    }\n  }\n\n  async function showPushVarSelection(projectId: string) {\n    debugLog(`üì§ Showing push variable selection for project: ${projectId}`)\n    clearScreen()\n    setCurrentScreen(\"push-var-selection\")\n\n    if (!parentContainer) return\n\n    // Show loading message\n    const loadingText = createText(\n      \"loading-text\",\n      \"Loading project details...\",\n      { left: centerX(renderer, 25), top: 12 },\n      { fg: colors.muted }\n    )\n    addElement(loadingText)\n\n    try {\n      // Get project details with environment variables\n      const response = await apiClient.getProject(projectId)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      if (!response.success || !response.data) {\n        debugLog(\"‚ùå Failed to fetch project for push var selection\")\n        const errorText = createText(\n          \"error-text\",\n          \"Failed to load project details. Please try again.\",\n          { left: centerX(renderer, 45), top: 12 },\n          { fg: colors.error }\n        )\n        addElement(errorText)\n        return\n      }\n\n      const project = response.data\n      debugLog(`‚úÖ Project loaded for push: ${project.name}, ${project.envs?.length || 0} env vars`)\n\n      const titleBox = createBox(\n        \"push-vars-title\",\n        `Push Variables to ${project.name}`,\n        { left: centerX(renderer, 80), top: 6 },\n        { width: 80, height: 3 }\n      )\n      addElement(titleBox)\n\n      if (!project.envs || project.envs.length === 0) {\n        const noEnvText = createText(\n          \"no-env-text\",\n          \"No environment variables found for this project to push.\",\n          { left: centerX(renderer, 50), top: 12 },\n          { fg: colors.muted }\n        )\n        addElement(noEnvText)\n\n        const backHint = createText(\n          \"back-hint\",\n          \"Press Escape to go back to project selection\",\n          { left: centerX(renderer, 40), top: 14 },\n          { fg: colors.secondary }\n        )\n        addElement(backHint)\n        return\n      }\n\n      const varOptions: SelectOption[] = project.envs.map(envVar => ({\n        name: envVar.key,\n        description: `${envVar.environmentName || \"default\"}: ${envVar.value.substring(0, 30)}...`,\n        value: envVar.id,\n      }))\n\n      const varsSelect = createSelect(\n        \"push-vars-list\",\n        varOptions,\n        { left: centerX(renderer, 76), top: 10 },\n        { width: 76, height: 12 }\n      )\n\n      varsSelect.on(SelectRenderableEvents.ITEM_SELECTED, (index: number, option: SelectOption) => {\n        handleDebouncedSelection(async () => {\n          const selectedEnvVar = project.envs?.find(env => env.id === option.value)\n          if (selectedEnvVar) {\n            await showPushConfirm(projectId, selectedEnvVar.key)\n          }\n        })\n      })\n\n      addElement(varsSelect)\n\n      const controlsTextElement = createText(\n        \"controls-text\",\n        controlsHelpText,\n        { left: centerX(renderer, 40), top: 24 },\n        { fg: colors.muted }\n      )\n      addElement(controlsTextElement)\n\n      // Auto-focus\n      setTimeout(() => {\n        if (varsSelect) {\n          varsSelect.focus()\n        }\n      }, 100)\n\n    } catch (error) {\n      debugLog(`‚ùå Error loading project for push var selection: ${error}`)\n      \n      // Remove loading text\n      if (parentContainer) {\n        parentContainer.remove(\"loading-text\")\n      }\n\n      const errorText = createText(\n        \"error-text\",\n        \"Error loading project details. Please try again.\",\n        { left: centerX(renderer, 45), top: 12 },\n        { fg: colors.error }\n      )\n      addElement(errorText)\n    }\n  }\n\n  function showPushConfirm(projectId: string, varKey: string) {\n    clearScreen()\n    setCurrentScreen(\"push-confirm\")\n\n    const project = mockProjects.find(p => p.id === projectId)\n    const envVar = mockEnvVars.find(v => v.key === varKey)\n    if (!project || !envVar || !parentContainer) return\n\n    const titleBox = createBox(\n      \"push-confirm-title\",\n      \"Confirm Push Operation\",\n      { left: centerX(renderer, 80), top: 8 },\n      { width: 80, height: 8 }\n    )\n    addElement(titleBox)\n\n    const confirmText = createText(\n      \"push-confirm-text\",\n      `Push \"${envVar.key}\" to \"${project.name}\"?\\n\\nValue: ${envVar.value}`,\n      { left: centerX(renderer, 60), top: 12 },\n      { fg: colors.secondary }\n    )\n    addElement(confirmText)\n\n    const confirmOptions: SelectOption[] = [\n      { name: \"Yes, Push Variable\", description: \"Upload this environment variable\", value: \"confirm\" },\n      { name: \"Cancel\", description: \"Go back without pushing\", value: \"cancel\" },\n    ]\n\n    const confirmSelect = createSelect(\n      \"push-confirm-select\",\n      confirmOptions,\n      { left: centerX(renderer, 76), top: 18 },\n      { width: 76, height: 2 }\n    )\n\n    confirmSelect.on(SelectRenderableEvents.ITEM_SELECTED, async (index: number, option: SelectOption) => {\n      handleDebouncedSelection(async () => {\n        if (option.value === \"confirm\") {\n          await runPush(projectId)\n          showMainMenu()\n        } else {\n          showPushVarSelection(projectId)\n        }\n      })\n    })\n\n    addElement(confirmSelect)\n\n    // Auto-focus\n    setTimeout(() => {\n      if (confirmSelect) {\n        confirmSelect.focus()\n      }\n    }, 100)\n  }\n\n  return {\n    showProjects,\n    showCreateProject,\n    showProjectDetails,\n    showProjectEnvVars,\n    showPullEnv,\n    showPullConfirm,\n    showPushEnv,\n    showPushVarSelection,\n    showPushConfirm,\n    showEnvVarDetails,\n  }\n}\n","import { CliRenderer, SelectRenderableEvents, type SelectOption } from \"@opentui/core\"\nimport { createBox, createText, createSelect, centerX, colors, controlsText as controlsHelpText } from \"../ui/ui\"\nimport { logout } from \"../utils/auth\"\n\nexport interface SettingsScreens {\n  showSettings: () => Promise<void>\n  showUserProfile: () => Promise<void>\n}\n\nexport function createSettingsScreens(\n  renderer: CliRenderer,\n  parentContainer: any,\n  addElement: (element: any) => void,\n  clearScreen: () => void,\n  setCurrentScreen: (screen: string) => void,\n  handleDebouncedSelection: (callback: () => void) => void,\n  showMainMenu: () => void,\n  showLoginScreen: () => void,\n  getCurrentUser: () => Promise<any>\n): SettingsScreens {\n\n  async function showSettings() {\n    clearScreen()\n    setCurrentScreen(\"settings\")\n\n    if (!parentContainer) return\n\n    const currentUser = await getCurrentUser()\n\n    const titleBox = createBox(\n      \"settings-title\",\n      \"CLI Settings\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const settingsText = [\n      `User: ${currentUser?.name || \"Not logged in\"}`,\n      \"Theme: Dark\",\n      \"Auto-save: Enabled\",\n      \"Default Environment: production\",\n      \"Log Level: info\",\n      \"Update Check: Daily\",\n      \"Backup: Enabled\",\n    ]\n\n    settingsText.forEach((text, index) => {\n      const settingText = createText(\n        `setting-${index}`,\n        text,\n        { left: centerX(renderer, 76), top: 10 + index },\n        { fg: colors.secondary }\n      )\n      addElement(settingText)\n    })\n\n    const backText = createText(\n      \"settings-back\",\n      \"Press 'Esc' or 'Backspace' to go back to main menu\",\n      { left: centerX(renderer, 45), top: 20 },\n      { fg: colors.muted }\n    )\n    addElement(backText)\n  }\n\n  async function showUserProfile() {\n    clearScreen()\n    setCurrentScreen(\"profile\")\n\n    if (!parentContainer) return\n\n    const currentUser = await getCurrentUser()\n\n    const titleBox = createBox(\n      \"profile-title\",\n      \"User Profile\",\n      { left: centerX(renderer, 80), top: 6 },\n      { width: 80, height: 3 }\n    )\n    addElement(titleBox)\n\n    const userDetails = [\n      `Name: ${currentUser?.name || \"Loading...\"}`,\n      `Email: ${currentUser?.email || \"Loading...\"}`,\n      `User ID: ${currentUser?.id || \"Loading...\"}`,\n      `Status: ${currentUser ? \"Authenticated\" : \"Error fetching user data\"}`,\n    ]\n\n    userDetails.forEach((detail, index) => {\n      const detailText = createText(\n        `user-detail-${index}`,\n        detail,\n        { left: centerX(renderer, 76), top: 10 + index },\n        { fg: colors.secondary }\n      )\n      addElement(detailText)\n    })\n\n    const actionOptions: SelectOption[] = [\n      { name: \"Logout\", description: \"Sign out and return to login screen\", value: \"logout\" },\n      { name: \"Back to Main Menu\", description: \"Return to the main menu\", value: \"back\" },\n    ]\n\n    const actionSelect = createSelect(\n      \"user-actions\",\n      actionOptions,\n      { left: centerX(renderer, 76), top: 20 },\n      { width: 76, height: 2 }\n    )\n\n    actionSelect.on(SelectRenderableEvents.ITEM_SELECTED, async (index: number, option: SelectOption) => {\n      handleDebouncedSelection(async () => {\n        if (option.value === \"logout\") {\n          await logout()\n          showLoginScreen()\n        } else if (option.value === \"back\") {\n          showMainMenu()\n        }\n      })\n    })\n\n    addElement(actionSelect)\n\n    const controlsTextElement = createText(\n      \"controls-text\",\n      controlsHelpText,\n      { left: centerX(renderer, 40), top: 24 },\n      { fg: colors.muted }\n    )\n    addElement(controlsTextElement)\n\n    // Auto-focus\n    setTimeout(() => {\n      if (actionSelect) {\n        actionSelect.focus()\n      }\n    }, 100)\n  }\n\n  return {\n    showSettings,\n    showUserProfile,\n  }\n}\n"],"mappings":"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","names":["fs","createCliRenderer","GroupRenderable","getKeyHandler","existsSync","mkdirSync","readFileSync","writeFileSync","appendFileSync","join","homedir","createTRPCClient","httpBatchLink","superjson","API_BASE_URL","trpc","createTRPCClient","httpBatchLink","superjson","token","loadToken","TRPCApiClient","error","id","data","apiClient","debugLog","message","appendFileSync","loadToken","tokenPath","join","homedir","existsSync","readFileSync","error","saveToken","token","configDir","mkdirSync","writeFileSync","clearToken","isAuthenticated","result","apiClient","getCurrentUser","logout","openBrowser","apiUrl","command","tryClipboardAuth","clipboardToken","execSync","fs","lastSelectionTime","SELECTION_DEBOUNCE_MS","debugLog","message","handleDebouncedSelection","callback","now","createScreenManager","currentScreen","currentScreenElements","focusedSelectElement","parentContainer","setParentContainer","container","setCurrentScreen","screen","getCurrentScreen","clearScreen","element","addElement","setFocusedElement","cleanup","runPull","projectId","resolve","runPush","TextRenderable","RGBA","FrameBufferRenderable","renderFontToFrameBuffer","BoxRenderable","SelectRenderable","colors","selectStyles","createLogo","renderer","position","buffer","createBox","id","title","size","options","createSelect","createText","content","centerX","width","controlsText","InputRenderable","InputRenderableEvents","fs","debugLog","message","createAuthScreens","renderer","parentContainer","addElement","clearScreen","setCurrentScreen","showSplashScreen","onTokenSet","tokenInput","showLoginScreen","titleBox","createBox","centerX","step1","createText","colors","step2","step3","showTokenInput","instructionsBox","instruction","index","instructionText","inputPrompt","pasteHint","InputRenderable","InputRenderableEvents","value","token","showAuthError","saveToken","isAuthenticated","showAuthenticating","statusBox","statusText","errorBox","errorText","cleanupTokenInput","SelectRenderableEvents","mainMenuOptions","createMainMenuScreen","renderer","parentContainer","addElement","clearScreen","setCurrentScreen","handleDebouncedSelection","handleMenuSelection","showSplashScreen","logo","createLogo","subtitleText","createText","versionText","colors","showMainMenu","titleBox","createBox","centerX","menuSelect","createSelect","SelectRenderableEvents","index","option","controlsTextElement","controlsText","SelectRenderableEvents","fs","debugLog","message","mockProjects","mockEnvVars","createProjectScreens","renderer","parentContainer","addElement","clearScreen","setCurrentScreen","handleDebouncedSelection","showMainMenu","runPull","runPush","showProjects","titleBox","createBox","centerX","loadingText","createText","colors","response","apiClient","projects","noProjectsText","createHint","projectOptions","project","projectSelect","createSelect","SelectRenderableEvents","index","option","showProjectDetails","controlsTextElement","controlsText","errorText","error","showCreateProject","instructionText","backText","projectId","detailsText","actionSelect","showProjectEnvVars","noEnvText","backHint","envOptions","envVar","envSelect","e","showEnvVarDetails","successText","showPullEnv","showPullConfirm","envCount","confirmText","confirmOptions","confirmSelect","showPushEnv","showPushVarSelection","varOptions","varsSelect","selectedEnvVar","env","showPushConfirm","varKey","p","v","SelectRenderableEvents","createSettingsScreens","renderer","parentContainer","addElement","clearScreen","setCurrentScreen","handleDebouncedSelection","showMainMenu","showLoginScreen","getCurrentUser","showSettings","currentUser","titleBox","createBox","centerX","text","index","settingText","createText","colors","backText","showUserProfile","detail","detailText","actionSelect","createSelect","SelectRenderableEvents","option","logout","controlsTextElement","controlsText","debugLog","message","fs","renderer","parentContainer","currentUser","cliToken","screenManager","createScreenManager","setCurrentScreen","getCurrentScreen","clearScreen","addElement","setFocusedElement","cleanup","setParentContainer","authScreens","mainMenuScreen","projectScreens","settingsScreens","handleMenuSelection","value","checkAuthAndContinue","isAuthenticated","getCurrentUser","handleClipboardAuth","result","tryClipboardAuth","handleKeyPress","key","projectId","currentProjectId","openBrowser","initializeScreens","createMainMenuScreen","handleDebouncedSelection","createAuthScreens","token","createProjectScreens","runPull","runPush","createSettingsScreens","cleanupApp","run","createCliRenderer","colors","GroupRenderable","getKeyHandler","loadToken"]}